(()=>{"use strict";let e,t=[],n=[],d=document.getElementById("task-form"),i=document.getElementById("edit-form-container"),c=0;class l{constructor(e,t,n,d,i,c){this.title=e,this.description=t,this.dueDate=n,this.priority=i,this.projectSelection=d,this.taskComplete=c}}function o(){document.getElementById("tasks").innerHTML="",c=0;for(let e=0;e<t.length;e++)a(t[e]),c++}function r(){document.getElementById("tasks").innerHTML="",c=0;for(let e=0;e<n.length;e++)a(n[e]),c++}function a(e){let n=document.getElementById("tasks"),d=document.createElement("div");d.classList.add("task-container");let i=document.createElement("input");i.type="checkbox",i.classList.add("checkbox"),i.setAttribute("id",c),i.addEventListener("change",(function(){this.checked?(d.classList.add("checked"),e.taskComplete=!0,localStorage.setItem("checkboxState","checked")):(d.classList.remove("checked"),e.taskComplete=!1,localStorage.removeItem("checkboxState")),p(),g(),y()})),1==e.taskComplete?d.classList.add("checked"):d.classList.remove("checked");let l=document.createElement("div");l.classList.add("task-details"),l.classList.add("expandable");let r=document.createElement("div");r.classList.add("task-title"),r.innerHTML=e.title;let a=document.createElement("div");a.classList.add("task-description"),a.innerHTML=`<b>Description:</b> ${e.description}`;let s=document.createElement("div");s.classList.add("task-due-date"),s.innerHTML=e.dueDate;let u=document.createElement("div");u.classList.add("task-project"),u.innerHTML=`<b>Project:</b> ${e.projectSelection}`;let E=document.createElement("div");E.classList.add("task-priority"),E.innerHTML=`<b>Priority:</b> ${e.priority}`;let h=document.createElement("img");h.classList.add("expand-button"),h.src="./images/expand-arrow.png",h.addEventListener("click",(()=>{l.classList.toggle("expanded")}));let L=document.createElement("img");L.classList.add("edit"),L.setAttribute("id","edit"),L.src="./images/edit.png",L.addEventListener("click",(()=>{m(e)}));let k=document.createElement("img");k.classList.add("delete-task"),k.src="./images/trash-black.png",k.addEventListener("click",(()=>{!function(e){const n=t.indexOf(e);t.splice(n,1),o(),y()}(e),p(),g()})),n.appendChild(d),d.appendChild(i),d.appendChild(l),l.appendChild(r),l.appendChild(s),l.appendChild(E),l.appendChild(h),l.appendChild(L),l.appendChild(k),l.appendChild(a),l.appendChild(u),l.appendChild(E),"High"==e.priority?d.classList.add("high-priority"):"Medium"==e.priority&&d.classList.add("medium-priority")}function s(){document.getElementById("form-container").style.display="none",d.reset()}function m(e){const n=t.indexOf(e);let d=t[n];m.selectedTask=d;let c=document.getElementById("edit-title-input"),l=document.getElementById("edit-description-input"),o=document.getElementById("edit-date-input"),r=document.getElementById("edit-project-selection"),a=document.getElementById("edit-priority-input");c.value=d.title,l.value=d.description,o.value=d.dueDate,r.value=d.projectSelection,a.value=d.priority,i.style.display="block"}function u(e){const n=t.indexOf(e);let d=t[n],c=document.getElementById("edit-title-input"),l=document.getElementById("edit-description-input"),r=document.getElementById("edit-date-input"),a=document.getElementById("edit-project-selection"),s=document.getElementById("edit-priority-input");if(d.title=c.value,d.description=l.value,d.dueDate=r.value,d.projectSelection=a.value,d.priority=s.value,""==d.title)return alert("Title is required"),!1;i.style.display="none",p(),g(),y(),o()}function p(){localStorage.setItem("tasks",JSON.stringify(t))}function g(){e=document.querySelectorAll("input[type=checkbox");for(let t=0;t<e.length;t++)localStorage.setItem(e[t].id,e[t].checked)}function y(){e=document.querySelectorAll("input[type=checkbox]");for(let t=0;t<e.length;t++)e[t].checked="true"===localStorage.getItem(e[t].id)}!function(){let e=localStorage.getItem("tasks");if(e){let n=JSON.parse(e);t=n,o()}}(),document.addEventListener("DOMContentLoaded",y);let E=[],h=document.getElementById("selection-header-container");function L(){let e=document.getElementById("project-error");e&&e.remove()}function k(){let e=document.getElementById("projects");e.innerHTML="";for(let t=0;t<E.length;t++){let n=document.createElement("div");n.classList.add("project-container"),e.appendChild(n);let d=document.createElement("div");d.classList.add("project-text"),d.innerHTML=E[t],n.appendChild(d),d.addEventListener("click",(()=>{h.innerHTML="";let e=document.createElement("div");e.innerHTML=E[t],e.setAttribute("id","selection-header"),h.appendChild(e)}));let i=document.createElement("img");i.classList.add("delete-project"),i.src="./images/trash.png",i.addEventListener("click",(()=>{var e;e=t,E.splice(e,1),f(),k(),v()})),n.appendChild(i)}}function v(){let e=document.getElementById("project-selection"),t=document.getElementById("edit-project-selection");e.innerHTML="",t.innerHTML="";let n=document.createElement("option");n.innerHTML=" ",e.appendChild(n);let d=document.createElement("option");d.innerHTML=" ",t.appendChild(d);for(let n=0;n<E.length;n++){let d=document.createElement("option");d.innerHTML=E[n],e.appendChild(d);let i=document.createElement("option");i.innerHTML=E[n],t.appendChild(i)}}function f(){localStorage.setItem("projects",JSON.stringify(E))}!function(){let e=localStorage.getItem("projects");if(e){let t=JSON.parse(e);E=t,k(),v()}}();let I=!1,B=!1,b=!1,j=document.getElementById("form-container");function T(){h.innerHTML="";let e=document.createElement("div");e.innerHTML="All Tasks",e.setAttribute("id","selection-header"),h.appendChild(e)}document.getElementById("new-project").addEventListener("click",(()=>{document.getElementById("new-project-form").style.display="block"})),document.getElementById("cancel-new-project").addEventListener("click",(()=>{document.getElementById("new-project-form").style.display="none",L(),document.getElementById("new-project-form").reset()})),document.getElementById("add-new-project").addEventListener("click",(function(){let e=document.getElementById("new-project-entry").value,t=document.getElementById("new-project-entry"),n=document.getElementById("new-project-form"),d=!0;if(""!=e){L();for(let n=0;n<E.length;n++)if(e==E[n]){let e=document.createElement("div");e.id="project-error",e.innerHTML="Project already exists*",t.parentNode.insertBefore(e,t.nextSibling),d=!1}d&&(E.push(e),n.reset(),f(),document.getElementById("new-project-form").style.display="none",k())}else{let e=document.createElement("div");e.id="project-error",e.innerHTML="This field is required*",t.parentNode.insertBefore(e,t.nextSibling)}return v(),E})),document.getElementById("new-task-container").addEventListener("click",(()=>{j.style.display="block"})),document.getElementById("close-button").addEventListener("click",(e=>{e.preventDefault(),s()})),document.getElementById("close-edits-button").addEventListener("click",(e=>{e.preventDefault(),i.style.display="none"})),document.getElementById("submit-button").addEventListener("click",(e=>{e.preventDefault(),function(){if(""==document.getElementById("title-input").value)return alert("Title is required"),!1;!function(){let e=document.getElementById("title-input").value,n=document.getElementById("description-input").value,d=document.getElementById("date-input").value,i=document.getElementById("project-selection").value,c=document.getElementById("priority-input").value,o=new l(e,n,d,i,c,!1);t.push(o),p(),g(),s()}(),I?(B?M():b&&H(),r(),y()):(o(),y())}()})),document.getElementById("all-tasks").addEventListener("click",(()=>{I=!1,T(),o(),y()})),document.getElementById("today-tasks").addEventListener("click",(()=>{I=!0,b=!0,B=!1,h.innerHTML="";let e=document.createElement("div");e.innerHTML="Due Today",e.setAttribute("id","selection-header"),h.appendChild(e),H(),r(),y()})),document.getElementById("week-tasks").addEventListener("click",(()=>{I=!0,b=!0,B=!1,h.innerHTML="";let e=document.createElement("div");e.innerHTML="Due Within a Week",e.setAttribute("id","selection-header"),h.appendChild(e),H(),r(),y()}));let C=document.getElementById("projects");function M(){let e=S();n=[],t.forEach((t=>{t.projectSelection==e&&n.push(t)}))}function H(){let e=D();console.log("currentDate: "+e);let d=function(){let e=new Date;e.setDate(e.getDate()+7);let t=e.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"});const[n,d,i]=t.split("/");return`${i}-${n}-${d}`}(),i=S();n=[],t.forEach((t=>{"Due Today"==i?t.dueDate==e&&n.push(t):"Due Within a Week"==i&&new Date(t.dueDate)<=new Date(d)&&n.push(t)}))}function D(){const e=(new Date).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}),[t,n,d]=e.split("/");return`${d}-${t}-${n}`}function S(){return document.getElementById("selection-header").innerHTML}C.addEventListener("click",(()=>{I=!0,B=!0,b=!1,M(),r(),y()})),C.addEventListener("click",(e=>{e.target.classList.contains("delete-project")&&(I=!1,T(),o(),y())})),document.getElementById("submit-edits-button").addEventListener("click",(e=>{e.preventDefault();let t=m.selectedTask;I?(u(t),B?M():b&&H(),r(),y()):(u(t),y())})),document.getElementById("edit-date-input").setAttribute("min",D()),document.getElementById("date-input").setAttribute("min",D())})();