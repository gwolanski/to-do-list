(()=>{"use strict";let e=[],t=[],n=document.getElementById("task-form"),d=document.getElementById("edit-form-container");class i{constructor(e,t,n,d,i,l){this.title=e,this.description=t,this.dueDate=n,this.priority=i,this.projectSelection=d,this.taskComplete=l}}function l(){document.getElementById("tasks").innerHTML="";for(let t=0;t<e.length;t++)c(e[t])}function c(t){let n=document.getElementById("tasks"),d=document.createElement("div");d.classList.add("task-container");let i=document.createElement("input");i.type="checkbox",i.addEventListener("change",(function(){this.checked?(d.classList.add("checked"),t.taskComplete=!0):(d.classList.remove("checked"),t.taskComplete=!1)})),1==t.taskComplete?d.classList.add("checked"):d.classList.remove("checked");let c=document.createElement("div");c.classList.add("task-details"),c.classList.add("expandable");let o=document.createElement("div");o.classList.add("task-title"),o.innerHTML=t.title;let a=document.createElement("div");a.classList.add("task-description"),a.innerHTML=`<b>Description:</b> ${t.description}`;let r=document.createElement("div");r.classList.add("task-due-date"),r.innerHTML=t.dueDate;let m=document.createElement("div");m.classList.add("task-project"),m.innerHTML=`<b>Project:</b> ${t.projectSelection}`;let u=document.createElement("div");u.classList.add("task-priority"),u.innerHTML=`<b>Priority:</b> ${t.priority}`;let p=document.createElement("img");p.classList.add("expand-button"),p.src="./images/expand-arrow.png",p.addEventListener("click",(e=>{c.classList.toggle("expanded")}));let E=document.createElement("img");E.classList.add("edit"),E.setAttribute("id","edit"),E.src="./images/edit.png",E.addEventListener("click",(e=>{s(t)}));let y=document.createElement("img");y.classList.add("delete"),y.src="./images/trash-black.png",y.addEventListener("click",(n=>{!function(t){const n=e.indexOf(t);e.splice(n,1),l()}(t)})),n.appendChild(d),d.appendChild(i),d.appendChild(c),c.appendChild(o),c.appendChild(r),c.appendChild(u),c.appendChild(p),c.appendChild(E),c.appendChild(y),c.appendChild(a),c.appendChild(m),c.appendChild(u)}function o(){document.getElementById("form-container").style.display="none"}function s(t){const n=e.indexOf(t);let i=e[n];s.selectedTask=i;let l=document.getElementById("edit-title-input"),c=document.getElementById("edit-description-input"),o=document.getElementById("edit-date-input"),a=document.getElementById("edit-project-selection"),r=document.getElementById("edit-priority-input");l.value=i.title,c.value=i.description,o.value=i.dueDate,a.value=i.projectSelection,r.value=i.priority,d.style.display="block"}let a=[],r=document.getElementById("selection-header-container");function m(){let e=document.getElementById("project-error");e&&e.remove()}function u(){let e=document.getElementById("projects");e.innerHTML="";for(let t=0;t<a.length;t++){let n=document.createElement("div");n.classList.add("project-container"),e.appendChild(n);let d=document.createElement("div");d.classList.add("project-text"),d.innerHTML=a[t],n.appendChild(d),d.addEventListener("click",(e=>{r.innerHTML="";let n=document.createElement("div");n.innerHTML=a[t],n.setAttribute("id","selection-header"),r.appendChild(n)}));let i=document.createElement("img");i.classList.add("delete"),i.src="./images/trash.png",i.addEventListener("click",(e=>{var n;n=t,a.splice(n,1),u()})),n.appendChild(i)}}let p=!1,E=document.getElementById("form-container");function y(){let e=document.getElementById("project-selection"),t=document.getElementById("edit-project-selection");e.innerHTML="",t.innerHTML="";let n=document.createElement("option");n.innerHTML=" ",e.appendChild(n),t.appendChild(n);for(let n=0;n<a.length;n++){let d=document.createElement("option");d.innerHTML=a[n],e.appendChild(d),t.appendChild(d)}}document.getElementById("new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="block"})),document.getElementById("cancel-new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="none",m()})),document.getElementById("add-new-project").addEventListener("click",(function(){let e=document.getElementById("new-project-entry").value,t=document.getElementById("new-project-entry"),n=document.getElementById("new-project-form");if(""!=e)m(),a.push(e),n.reset(),u();else{let e=document.createElement("div");e.id="project-error",e.innerHTML="This field is required*",t.parentNode.insertBefore(e,t.nextSibling)}return a})),document.getElementById("new-task-container").addEventListener("click",(e=>{E.style.display="block",y()})),document.getElementById("close-button").addEventListener("click",(e=>{e.preventDefault(),o()})),document.getElementById("close-edits-button").addEventListener("click",(e=>{e.preventDefault(),d.style.display="none"})),document.getElementById("submit-button").addEventListener("click",(t=>{t.preventDefault(),function(){if(""==document.getElementById("title-input").value)return alert("Title is required"),!1;!function(){let t=document.getElementById("title-input").value,d=document.getElementById("description-input").value,c=document.getElementById("date-input").value,s=document.getElementById("project-selection").value,a=document.getElementById("priority-input").value,r=new i(t,d,c,s,a,!1);e.push(r),l(),o(),n.reset()}()}()})),document.getElementById("all-tasks").addEventListener("click",(e=>{p=!1,r.innerHTML="",l()})),document.getElementById("projects").addEventListener("click",(n=>{p=!0;let d=document.getElementById("selection-header").innerHTML;t=[],e.forEach((e=>{e.projectSelection==d&&t.push(e)})),function(){document.getElementById("tasks").innerHTML="";for(let e=0;e<t.length;e++)c(t[e])}()})),document.getElementById("submit-edits-button").addEventListener("click",(t=>{t.preventDefault();let n=s.selectedTask;console.log("currentTask: "+n),function(t){const n=e.indexOf(t);let i=e[n],c=document.getElementById("edit-title-input"),o=document.getElementById("edit-description-input"),s=document.getElementById("edit-date-input"),a=document.getElementById("edit-project-selection"),r=document.getElementById("edit-priority-input");if(i.title=c.value,i.description=o.value,i.dueDate=s.value,i.projectSelection=a.value,i.priority=r.value,""==i.title)return alert("Title is required"),!1;d.style.display="none",l()}(n)})),document.getElementById("edit").addEventListener("click",y)})();