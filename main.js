(()=>{"use strict";let e=[],t=document.getElementById("selection-header-container");function n(){let e=document.getElementById("project-error");e&&e.remove()}function d(){let n=document.getElementById("projects");n.innerHTML="";for(let l=0;l<e.length;l++){let c=document.createElement("div");c.classList.add("project-container"),n.appendChild(c);let o=document.createElement("div");o.classList.add("project-text"),o.innerHTML=e[l],c.appendChild(o),o.addEventListener("click",(n=>{t.innerHTML="";let d=document.createElement("div");d.innerHTML=e[l],d.setAttribute("id","selection-header"),t.appendChild(d)}));let a=document.createElement("img");a.classList.add("delete"),a.src="./images/trash.png",a.addEventListener("click",(t=>{var n;n=l,e.splice(n,1),d(),i()})),c.appendChild(a)}}function i(){let t=document.getElementById("project-selection"),n=document.getElementById("edit-project-selection");t.innerHTML="",n.innerHTML="";let d=document.createElement("option");d.innerHTML=" ",t.appendChild(d);let i=document.createElement("option");i.innerHTML=" ",n.appendChild(i);for(let d=0;d<e.length;d++){let i=document.createElement("option");i.innerHTML=e[d],t.appendChild(i);let l=document.createElement("option");l.innerHTML=e[d],n.appendChild(l)}}let l=[],c=[],o=document.getElementById("task-form"),a=document.getElementById("edit-form-container");class r{constructor(e,t,n,d,i,l){this.title=e,this.description=t,this.dueDate=n,this.priority=i,this.projectSelection=d,this.taskComplete=l}}function s(){document.getElementById("tasks").innerHTML="";for(let e=0;e<l.length;e++)u(l[e],projects)}function m(){document.getElementById("tasks").innerHTML="";for(let e=0;e<c.length;e++)u(c[e])}function u(e){let t=document.getElementById("tasks"),n=document.createElement("div");n.classList.add("task-container");let d=document.createElement("input");d.type="checkbox",d.addEventListener("change",(function(){this.checked?(n.classList.add("checked"),e.taskComplete=!0):(n.classList.remove("checked"),e.taskComplete=!1)})),1==e.taskComplete?n.classList.add("checked"):n.classList.remove("checked");let i=document.createElement("div");i.classList.add("task-details"),i.classList.add("expandable");let c=document.createElement("div");c.classList.add("task-title"),c.innerHTML=e.title;let o=document.createElement("div");o.classList.add("task-description"),o.innerHTML=`<b>Description:</b> ${e.description}`;let a=document.createElement("div");a.classList.add("task-due-date"),a.innerHTML=e.dueDate;let r=document.createElement("div");r.classList.add("task-project"),r.innerHTML=`<b>Project:</b> ${e.projectSelection}`;let m=document.createElement("div");m.classList.add("task-priority"),m.innerHTML=`<b>Priority:</b> ${e.priority}`;let u=document.createElement("img");u.classList.add("expand-button"),u.src="./images/expand-arrow.png",u.addEventListener("click",(e=>{i.classList.toggle("expanded")}));let p=document.createElement("img");p.classList.add("edit"),p.setAttribute("id","edit"),p.src="./images/edit.png",p.addEventListener("click",(t=>{E(e)}));let y=document.createElement("img");y.classList.add("delete"),y.src="./images/trash-black.png",y.addEventListener("click",(t=>{!function(e){const t=l.indexOf(e);l.splice(t,1),s()}(e)})),t.appendChild(n),n.appendChild(d),n.appendChild(i),i.appendChild(c),i.appendChild(a),i.appendChild(m),i.appendChild(u),i.appendChild(p),i.appendChild(y),i.appendChild(o),i.appendChild(r),i.appendChild(m)}function p(){document.getElementById("form-container").style.display="none"}function E(e){const t=l.indexOf(e);let n=l[t];E.selectedTask=n;let d=document.getElementById("edit-title-input"),i=document.getElementById("edit-description-input"),c=document.getElementById("edit-date-input"),o=document.getElementById("edit-project-selection"),r=document.getElementById("edit-priority-input");d.value=n.title,i.value=n.description,c.value=n.dueDate,o.value=n.projectSelection,r.value=n.priority,a.style.display="block"}let y=!1,g=document.getElementById("form-container");function L(){let e=document.getElementById("selection-header").innerHTML;c=[],l.forEach((t=>{t.projectSelection==e&&c.push(t)}))}document.getElementById("new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="block"})),document.getElementById("cancel-new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="none",n()})),document.getElementById("add-new-project").addEventListener("click",(function(){let t=document.getElementById("new-project-entry").value,l=document.getElementById("new-project-entry"),c=document.getElementById("new-project-form");if(""!=t)n(),e.push(t),c.reset(),d();else{let e=document.createElement("div");e.id="project-error",e.innerHTML="This field is required*",l.parentNode.insertBefore(e,l.nextSibling)}return i(),e})),document.getElementById("new-task-container").addEventListener("click",(e=>{g.style.display="block"})),document.getElementById("close-button").addEventListener("click",(e=>{e.preventDefault(),p()})),document.getElementById("close-edits-button").addEventListener("click",(e=>{e.preventDefault(),a.style.display="none"})),document.getElementById("submit-button").addEventListener("click",(e=>{e.preventDefault(),function(){if(""==document.getElementById("title-input").value)return alert("Title is required"),!1;!function(){let e=document.getElementById("title-input").value,t=document.getElementById("description-input").value,n=document.getElementById("date-input").value,d=document.getElementById("project-selection").value,i=document.getElementById("priority-input").value,c=new r(e,t,n,d,i,!1);l.push(c),p(),o.reset()}(),1==y?(L(),m()):s()}()})),document.getElementById("all-tasks").addEventListener("click",(e=>{y=!1,t.innerHTML="",s()})),document.getElementById("projects").addEventListener("click",(e=>{y=!0,L(),m()})),document.getElementById("submit-edits-button").addEventListener("click",(e=>{e.preventDefault(),function(e){const t=l.indexOf(e);let n=l[t],d=document.getElementById("edit-title-input"),i=document.getElementById("edit-description-input"),c=document.getElementById("edit-date-input"),o=document.getElementById("edit-project-selection"),r=document.getElementById("edit-priority-input");if(n.title=d.value,n.description=i.value,n.dueDate=c.value,n.projectSelection=o.value,n.priority=r.value,""==n.title)return alert("Title is required"),!1;a.style.display="none",s()}(E.selectedTask)}))})();