(()=>{"use strict";let e=[],t=[],n=document.getElementById("task-form"),i=document.getElementById("edit-form-container");class d{constructor(e,t,n,i,d,l){this.title=e,this.description=t,this.dueDate=n,this.priority=d,this.projectSelection=i,this.taskComplete=l}}function l(){document.getElementById("tasks").innerHTML="";for(let t=0;t<e.length;t++)o(e[t])}function c(){document.getElementById("tasks").innerHTML="";for(let e=0;e<t.length;e++)o(t[e])}function o(t){let n=document.getElementById("tasks"),i=document.createElement("div");i.classList.add("task-container");let d=document.createElement("input");d.type="checkbox",d.addEventListener("change",(function(){this.checked?(i.classList.add("checked"),t.taskComplete=!0):(i.classList.remove("checked"),t.taskComplete=!1)})),1==t.taskComplete?i.classList.add("checked"):i.classList.remove("checked");let c=document.createElement("div");c.classList.add("task-details"),c.classList.add("expandable");let o=document.createElement("div");o.classList.add("task-title"),o.innerHTML=t.title;let r=document.createElement("div");r.classList.add("task-description"),r.innerHTML=`<b>Description:</b> ${t.description}`;let s=document.createElement("div");s.classList.add("task-due-date"),s.innerHTML=t.dueDate;let m=document.createElement("div");m.classList.add("task-project"),m.innerHTML=`<b>Project:</b> ${t.projectSelection}`;let u=document.createElement("div");u.classList.add("task-priority"),u.innerHTML=`<b>Priority:</b> ${t.priority}`;let p=document.createElement("img");p.classList.add("expand-button"),p.src="./images/expand-arrow.png",p.addEventListener("click",(e=>{c.classList.toggle("expanded")}));let E=document.createElement("img");E.classList.add("edit"),E.setAttribute("id","edit"),E.src="./images/edit.png",E.addEventListener("click",(e=>{a(t)}));let g=document.createElement("img");g.classList.add("delete-task"),g.src="./images/trash-black.png",g.addEventListener("click",(n=>{!function(t){const n=e.indexOf(t);e.splice(n,1),l()}(t)})),n.appendChild(i),i.appendChild(d),i.appendChild(c),c.appendChild(o),c.appendChild(s),c.appendChild(u),c.appendChild(p),c.appendChild(E),c.appendChild(g),c.appendChild(r),c.appendChild(m),c.appendChild(u),"High"==t.priority?i.classList.add("high-priority"):"Medium"==t.priority&&i.classList.add("medium-priority")}function r(){document.getElementById("form-container").style.display="none",n.reset()}function a(t){const n=e.indexOf(t);let d=e[n];a.selectedTask=d;let l=document.getElementById("edit-title-input"),c=document.getElementById("edit-description-input"),o=document.getElementById("edit-date-input"),r=document.getElementById("edit-project-selection"),s=document.getElementById("edit-priority-input");l.value=d.title,c.value=d.description,o.value=d.dueDate,r.value=d.projectSelection,s.value=d.priority,i.style.display="block"}function s(t){const n=e.indexOf(t);let d=e[n],c=document.getElementById("edit-title-input"),o=document.getElementById("edit-description-input"),r=document.getElementById("edit-date-input"),a=document.getElementById("edit-project-selection"),s=document.getElementById("edit-priority-input");if(d.title=c.value,d.description=o.value,d.dueDate=r.value,d.projectSelection=a.value,d.priority=s.value,""==d.title)return alert("Title is required"),!1;i.style.display="none",m(),l()}function m(){localStorage.setItem("tasks",JSON.stringify(e))}!function(){let t=localStorage.getItem("tasks");if(t){let n=JSON.parse(t);e=n,l()}}();let u=[],p=document.getElementById("selection-header-container");function E(){let e=document.getElementById("project-error");e&&e.remove()}function g(){let e=document.getElementById("projects");e.innerHTML="";for(let t=0;t<u.length;t++){let n=document.createElement("div");n.classList.add("project-container"),e.appendChild(n);let i=document.createElement("div");i.classList.add("project-text"),i.innerHTML=u[t],n.appendChild(i),i.addEventListener("click",(e=>{p.innerHTML="";let n=document.createElement("div");n.innerHTML=u[t],n.setAttribute("id","selection-header"),p.appendChild(n)}));let d=document.createElement("img");d.classList.add("delete-project"),d.src="./images/trash.png",d.addEventListener("click",(e=>{var n;n=t,u.splice(n,1),L(),g(),y()})),n.appendChild(d)}}function y(){let e=document.getElementById("project-selection"),t=document.getElementById("edit-project-selection");e.innerHTML="",t.innerHTML="";let n=document.createElement("option");n.innerHTML=" ",e.appendChild(n);let i=document.createElement("option");i.innerHTML=" ",t.appendChild(i);for(let n=0;n<u.length;n++){let i=document.createElement("option");i.innerHTML=u[n],e.appendChild(i);let d=document.createElement("option");d.innerHTML=u[n],t.appendChild(d)}}function L(){localStorage.setItem("projects",JSON.stringify(u))}!function(){let e=localStorage.getItem("projects");if(e){let t=JSON.parse(e);u=t,g(),y()}}();let h=!1,v=!1,f=!1,k=document.getElementById("form-container");function I(){p.innerHTML="";let e=document.createElement("div");e.innerHTML="All Tasks",e.setAttribute("id","selection-header"),p.appendChild(e)}document.getElementById("new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="block"})),document.getElementById("cancel-new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="none",E(),document.getElementById("new-project-form").reset()})),document.getElementById("add-new-project").addEventListener("click",(function(){let e=document.getElementById("new-project-entry").value,t=document.getElementById("new-project-entry"),n=document.getElementById("new-project-form"),i=!0;if(""!=e){E();for(let n=0;n<u.length;n++)if(e==u[n]){let e=document.createElement("div");e.id="project-error",e.innerHTML="Project already exists*",t.parentNode.insertBefore(e,t.nextSibling),i=!1}i&&(u.push(e),n.reset(),L(),document.getElementById("new-project-form").style.display="none",g())}else{let e=document.createElement("div");e.id="project-error",e.innerHTML="This field is required*",t.parentNode.insertBefore(e,t.nextSibling)}return y(),u})),document.getElementById("new-task-container").addEventListener("click",(e=>{k.style.display="block"})),document.getElementById("close-button").addEventListener("click",(e=>{e.preventDefault(),r()})),document.getElementById("close-edits-button").addEventListener("click",(e=>{e.preventDefault(),i.style.display="none"})),document.getElementById("submit-button").addEventListener("click",(t=>{t.preventDefault(),function(){if(""==document.getElementById("title-input").value)return alert("Title is required"),!1;!function(){let t=document.getElementById("title-input").value,n=document.getElementById("description-input").value,i=document.getElementById("date-input").value,l=document.getElementById("project-selection").value,c=document.getElementById("priority-input").value,o=new d(t,n,i,l,c,!1);e.push(o),m(),r()}(),h?(v?T():f&&j(),c()):l()}()})),document.getElementById("all-tasks").addEventListener("click",(e=>{h=!1,I(),l()})),document.getElementById("today-tasks").addEventListener("click",(e=>{h=!0,f=!0,v=!1,p.innerHTML="";let t=document.createElement("div");t.innerHTML="Due Today",t.setAttribute("id","selection-header"),p.appendChild(t),j(),c()})),document.getElementById("week-tasks").addEventListener("click",(e=>{h=!0,f=!0,v=!1,p.innerHTML="";let t=document.createElement("div");t.innerHTML="Due Within a Week",t.setAttribute("id","selection-header"),p.appendChild(t),j(),c()}));let B=document.getElementById("projects");function T(){let n=C();t=[],e.forEach((e=>{e.projectSelection==n&&t.push(e)}))}function j(){let n=b();console.log("currentDate: "+n);let i=function(){let e=new Date;e.setDate(e.getDate()+7);let t=e.toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"});const[n,i,d]=t.split("/");return`${d}-${n}-${i}`}(),d=C();t=[],e.forEach((e=>{"Due Today"==d?e.dueDate==n&&t.push(e):"Due Within a Week"==d&&new Date(e.dueDate)<=new Date(i)&&t.push(e)})),console.log("filteredTasks:"+t)}function b(){const e=(new Date).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}),[t,n,i]=e.split("/");return`${i}-${t}-${n}`}function C(){return document.getElementById("selection-header").innerHTML}B.addEventListener("click",(e=>{h=!0,v=!0,f=!1,T(),c()})),B.addEventListener("click",(e=>{e.target.classList.contains("delete-project")&&(h=!1,I(),l())})),document.getElementById("submit-edits-button").addEventListener("click",(e=>{e.preventDefault();let t=a.selectedTask;1==h?(s(t),(v=!0)?T():(f=!0)&&j(),c()):s(t)})),document.getElementById("edit-date-input").setAttribute("min",b()),document.getElementById("date-input").setAttribute("min",b())})();