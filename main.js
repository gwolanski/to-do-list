(()=>{"use strict";let e=[],t=document.getElementById("selection-header-container");function n(){let e=document.getElementById("project-error");e&&e.remove()}function d(){let n=document.getElementById("projects");n.innerHTML="";for(let l=0;l<e.length;l++){let c=document.createElement("div");c.classList.add("project-container"),n.appendChild(c);let o=document.createElement("div");o.classList.add("project-text"),o.innerHTML=e[l],c.appendChild(o),o.addEventListener("click",(n=>{t.innerHTML="";let d=document.createElement("div");d.innerHTML=e[l],d.setAttribute("id","selection-header"),t.appendChild(d)}));let s=document.createElement("img");s.classList.add("delete"),s.src="./images/trash.png",s.addEventListener("click",(t=>{var n;n=l,e.splice(n,1),d(),i()})),c.appendChild(s)}}function i(){let t=document.getElementById("project-selection"),n=document.getElementById("edit-project-selection");t.innerHTML="",n.innerHTML="";let d=document.createElement("option");d.innerHTML=" ",t.appendChild(d);let i=document.createElement("option");i.innerHTML=" ",n.appendChild(i);for(let d=0;d<e.length;d++){let i=document.createElement("option");i.innerHTML=e[d],t.appendChild(i);let l=document.createElement("option");l.innerHTML=e[d],n.appendChild(l)}console.log("this shit should work")}let l=[],c=[],o=document.getElementById("task-form"),s=document.getElementById("edit-form-container");class r{constructor(e,t,n,d,i,l){this.title=e,this.description=t,this.dueDate=n,this.priority=i,this.projectSelection=d,this.taskComplete=l}}function a(){document.getElementById("tasks").innerHTML="";for(let e=0;e<l.length;e++)m(l[e],projects)}function m(e,t){let n=document.getElementById("tasks"),d=document.createElement("div");d.classList.add("task-container");let i=document.createElement("input");i.type="checkbox",i.addEventListener("change",(function(){this.checked?(d.classList.add("checked"),e.taskComplete=!0):(d.classList.remove("checked"),e.taskComplete=!1)})),1==e.taskComplete?d.classList.add("checked"):d.classList.remove("checked");let c=document.createElement("div");c.classList.add("task-details"),c.classList.add("expandable");let o=document.createElement("div");o.classList.add("task-title"),o.innerHTML=e.title;let s=document.createElement("div");s.classList.add("task-description"),s.innerHTML=`<b>Description:</b> ${e.description}`;let r=document.createElement("div");r.classList.add("task-due-date"),r.innerHTML=e.dueDate;let m=document.createElement("div");m.classList.add("task-project"),m.innerHTML=`<b>Project:</b> ${e.projectSelection}`;let u=document.createElement("div");u.classList.add("task-priority"),u.innerHTML=`<b>Priority:</b> ${e.priority}`;let E=document.createElement("img");E.classList.add("expand-button"),E.src="./images/expand-arrow.png",E.addEventListener("click",(e=>{c.classList.toggle("expanded")}));let y=document.createElement("img");y.classList.add("edit"),y.setAttribute("id","edit"),y.src="./images/edit.png",y.addEventListener("click",(t=>{p(e)}));let g=document.createElement("img");g.classList.add("delete"),g.src="./images/trash-black.png",g.addEventListener("click",(t=>{!function(e){const t=l.indexOf(e);l.splice(t,1),a()}(e)})),n.appendChild(d),d.appendChild(i),d.appendChild(c),c.appendChild(o),c.appendChild(r),c.appendChild(u),c.appendChild(E),c.appendChild(y),c.appendChild(g),c.appendChild(s),c.appendChild(m),c.appendChild(u)}function u(){document.getElementById("form-container").style.display="none"}function p(e){const t=l.indexOf(e);let n=l[t];p.selectedTask=n;let d=document.getElementById("edit-title-input"),i=document.getElementById("edit-description-input"),c=document.getElementById("edit-date-input"),o=document.getElementById("edit-project-selection"),r=document.getElementById("edit-priority-input");d.value=n.title,i.value=n.description,c.value=n.dueDate,o.value=n.projectSelection,r.value=n.priority,s.style.display="block"}let E=!1,y=document.getElementById("form-container");document.getElementById("new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="block"})),document.getElementById("cancel-new-project").addEventListener("click",(e=>{document.getElementById("new-project-form").style.display="none",n()})),document.getElementById("add-new-project").addEventListener("click",(function(){let t=document.getElementById("new-project-entry").value,l=document.getElementById("new-project-entry"),c=document.getElementById("new-project-form");if(""!=t)n(),e.push(t),c.reset(),d();else{let e=document.createElement("div");e.id="project-error",e.innerHTML="This field is required*",l.parentNode.insertBefore(e,l.nextSibling)}return i(),e})),document.getElementById("new-task-container").addEventListener("click",(e=>{y.style.display="block"})),document.getElementById("close-button").addEventListener("click",(e=>{e.preventDefault(),u()})),document.getElementById("close-edits-button").addEventListener("click",(e=>{e.preventDefault(),s.style.display="none"})),document.getElementById("submit-button").addEventListener("click",(e=>{e.preventDefault(),function(){if(""==document.getElementById("title-input").value)return alert("Title is required"),!1;!function(){let e=document.getElementById("title-input").value,t=document.getElementById("description-input").value,n=document.getElementById("date-input").value,d=document.getElementById("project-selection").value,i=document.getElementById("priority-input").value,c=new r(e,t,n,d,i,!1);l.push(c),a(),u(),o.reset()}()}()})),document.getElementById("all-tasks").addEventListener("click",(e=>{E=!1,t.innerHTML="",a()})),document.getElementById("projects").addEventListener("click",(e=>{E=!0;let t=document.getElementById("selection-header").innerHTML;c=[],l.forEach((e=>{e.projectSelection==t&&c.push(e)})),function(){document.getElementById("tasks").innerHTML="";for(let e=0;e<c.length;e++)m(c[e],projects)}()})),document.getElementById("submit-edits-button").addEventListener("click",(e=>{e.preventDefault();let t=p.selectedTask;console.log("currentTask: "+t),function(e){const t=l.indexOf(e);let n=l[t],d=document.getElementById("edit-title-input"),i=document.getElementById("edit-description-input"),c=document.getElementById("edit-date-input"),o=document.getElementById("edit-project-selection"),r=document.getElementById("edit-priority-input");if(n.title=d.value,n.description=i.value,n.dueDate=c.value,n.projectSelection=o.value,n.priority=r.value,""==n.title)return alert("Title is required"),!1;s.style.display="none",a()}(t)}))})();